<!doctype html>
<html>
	<head>
		<title> API Homework </title>
		<meta charset="utf-8"/>
		<script>
			function mainFunction() {
				
				var ajaxRequest = new XMLHttpRequest();

				console.log("1 - request object created");

				ajaxRequest.open("GET", "http://www.recipepuppy.com/api/", true);
				
				// Tried this and a few other fixes from online but didn't work
				
				// ajaxRequest.setRequestHeader('Access-Control-Allow-Origin', '*');

				console.log("2 - opened request file");

				ajaxRequest.onreadystatechange = function(){

					console.log("ready state changed");

					if(ajaxRequest.readystate == 1){

						console.log("Established server connection. ");

					} else if(ajaxRequest.readyState == 2){

						console.log("Request received by server.");

					} else if(ajaxRequest.readyState == 3){

						console.log("Processing request.");

					} else if(ajaxRequest.readyState == 4){

						console.log("Done loading!");

						if (ajaxRequest.status == 200){
							// Code goes inside of this if statement for what to do with file received
							console.log("File loaded successfully");
							var JSONobject = JSON.parse(ajaxRequest.responsetext);
							document.getElementById("API").innerHTML(JSONobject[0].title);
							document.getElementById("API").innerHTML(JSONobject[0].thumbnail);
							document.getElementById("API").innerHTML(JSONobject[0].ingredients);
						}
					} else{
						console.log("Something went wrong.");
					}
			}
				ajaxRequest.send();
				console.log("3 - request sent");
		}
			
		</script>
	</head>

	<body onload="mainFunction()">
		<div id = "API"> 

		</div>
		<p>
		  1. The Api That I found links to a database of recipes. With it, you are able to get the title of a specific dish,
		  the image for the dish, and the ingredients to display on the page.
			
		  2. http://www.recipepuppy.com/api/
			
		  3. I used the title, thumbnal, and ingredients of the first recipe
			
		  4. This api could be useful for an app that picks custom recipes or generates random meals for a user.
		</p>
	</body>
</html>
